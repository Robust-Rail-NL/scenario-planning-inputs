# Data for the Robust Rail project

This repository contains all the data used and generated by the robust rail project. This includes the location files of the different shunting yards, configurations to generate scenarios, valid scenarios created by the [robust-rail-generator](https://github.com/Robust-Rail-NL/robust-rail-generator), and valid plans for these scenarios that are generated by the [robust-rail-solver](https://github.com/Robust-Rail-NL/robust-rail-solver), which can be validated with the [robust-rail-evaluator](https://github.com/Robust-Rail-NL/robust-rail-evaluator).

Currently, each location and scenario has two formats: 
* **robust-rail-evaluator** format, called something like `location.json`
* **robust-rail-solver** format, where the file names include `solver`, such as `location_solver.json`

The structure of this repository is dominated by the locations, which are shunting yards, either real-world data or manually constructed. For each location, many scenarios can be created and these are all grouped in the location folder. This folder should be named `Location_CamelCaseName`, such as `Location_KleineBinckhorst`. Each of these folders must follow the same structure:
* `location.json` this is the location file in the format used by the generator and the evaluator
* `location_solver.json` this is the location file in the format used by the solver
* `configurations/` this is a folder that holds scenario configurations as used by the robust-rail-generator, where each file should be named `scenario_config_<name>.json`
* `scenarios/` this is a folder that holds the valid scenario files, either generated by the robust-rail-generator or manually constructed, where each file should be named `scenario_<name>.json` which has a solver format counterpart `scenario_solver_<name>.json`
* `plans/` this is a folder where the plans generated by the robust-rail-solver will be stored, they should be named `plan_<name>.json`, where `<name>` should correspond to one of the scenarios. The `plan_<name>.txt` is also generated
* `config.json` is a configuration file for the robust-rail-evaluator
* `vis_config.json` is an optional configuration file for the visualization function of the evaluator.

Optionally, a `README.md` can be added for a location, as well as a `location.png` or `<location_name>.png` file. 

To check whether the two location files are equivalent, you can do
```bash
$ python check_location_format.py Location_Name/location.json Location_Name/location_solver.json
```
Currently, the repository holds the following locations
* [Kleine Binckhorst](./Location_KleineBinckhorst/)
* [Simple Service location](./Location_SimpleService/)

### Location files
Each JSON formatted location files, in the solver and normal formats, have the following structure

Each file contains trackparts, which can be either 
- a `RailRoad`: regular track part with a given length
- a `Switch`: this is a switch which has two tracks connected on one side and one track on the other side
- an `EnglishSwitch`: this is a switch connecting two tracks on both sides of the switch
- an `Intersection`: this is a different kind of switch also connecting two tracks on both sides of the switch
- a `Bumper`: this is the end of a track, each `RailRoad` track must always have exactly one track part on both the A and B sides, and for dead-end tracks this is often a `Bumper`, as well as for incoming tracks.

Each file can contain facilities, which can be maintenance or cleaning parts of the shunting yard. They are defined by an `id`, a `type` (e.g., "Reinigingsperron", "Wasmachine", "Inspectieput"), the `relatedTrackParts` (which track part ids this facility is located), the `taskTypes` or service tasks that can be performed here, the `simultaneousUsageCount` on how many train units can be serviced at the same time, and the `timeWindow` during which servicing can take place. 

